!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Validator=t():e.Validator=t()}(window,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){o(e,t,n[t])})}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(t,o){var i=this;for(var a in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.rules=r({required:function(e){return"radio"===e.type||"checkbox"===e.type?!!i.handleForm.querySelector('input[name="'.concat(e.name,'"]:checked')):""!==e.value},minLength:function(e,t){return e.value.length>=t},maxLength:function(e,t){return e.value.length<=t},notZero:function(e){return parseInt(e.value,10)>0},int:function(e){return new RegExp(/^[0-9]+$/gi).test(e.value)},float:function(e){var t=e.value.toString().replace(/\,/,".");return i.int(t)||new RegExp(/^([0-9])+(\.)([0-9]+$)/gi).test(t)},min:function(e,t){var n=e.value.toString().replace(/\,/,".");return new RegExp(/^[0-9]+$/gi).test(n)||new RegExp(/^([0-9])+(\.)([0-9]+$)/gi).test(n)?parseFloat(n)>=parseFloat(t):parseInt(n,10)>=parseInt(t,10)},max:function(e,t){var n=e.value.toString().replace(/\,/,".");return new RegExp(/^[0-9]+$/gi).test(n)||new RegExp(/^([0-9])+(\.)([0-9]+$)/gi).test(n)?parseFloat(n)<=parseFloat(t):parseInt(n,10)<=parseInt(t,10)},email:function(e){return new RegExp(/^(("[\w-\s]+")|([\w\-]+(?:\.[\w\-]+)*)|("[\w-\s]+")([\w\-]+(?:\.[\w\-]+)*))(@((?:[\w\-]+\.)*\w[\w\-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/i).test(e.value)},dateMax:function(e,t){return new Date(e.value)<=new Date(t)},dateLess:function(e,t){return new Date(e.value)>=new Date(t)},date:function(e,t){var n={"yyyy-mm-dd":/^\d{4}-\d{2}-\d{2}$/,"yyyy/mm/dd":/^\d{4}\/\d{2}\/\d{2}$/}[t];if(!e.value.match(n))return!1;var r=new Date(e.value);return!Number.isNaN(r.getTime())&&r.toISOString().slice(0,10)===e.value},confirmation:function(e,t){return i.handleForm.querySelector('input[name="'.concat(t,'"]')).value===e.value}},o.rules,{remote:function(e,t){var n={};n[t.nameData]=e.value;var r={method:t.method,body:JSON.stringify(n),headers:{"Content-Type":"application/json"}};return fetch(t.url,r).then(function(e){return e.json()}).then(function(e){return t.check(e)?Promise.resolve():Promise.reject()})}}),this.handleForm=t,this.fields=this._getFields(o.fields,o.messages),o.messages)"object"==n(o.messages[a])&&delete o.messages[a];this.errorMessages=r({required:function(){return console.log("swws"),"This field is required"},minLength:function(e){return"This field must have at least ".concat(e," characters")},maxLength:function(e){return"This field must have max ".concat(e," characters")},notZero:function(){return"This field cannot be zero"},int:function(){return"This field must be a integer"},float:function(){return"This field must be a float"},min:function(e){return"This field must have be greater than ".concat(e)},max:function(e){return"This field must have be less than ".concat(e)},email:function(){return"Email address is invalid"},remote:function(){return"Invalid value"},dateMax:function(e){return"The max date is ".concat(e)},dateLess:function(e){return"The less date is ".concat(e)},date:function(e){return"Date is invalid should be ".concat(e)},confirmation:function(e){return"This field should be equals to ".concat(e)}},o.messages),this._addEventChange(),this._addEventSubmit(),this.submit=o.submit||Promise.resolve()}var t,o,a;return t=e,(o=[{key:"_handleChange",value:function(e){var t=this;this.validate([e.target]).then(function(){t._hideErrors()}).catch(function(){t._showErrors()})}},{key:"_handleSubmit",value:function(e){var t=this;e.preventDefault();var n=Object.keys(this.fields),r=[];return n.forEach(function(e){var n=t.fields[e].fieldElements;r.push(t.validate(n))}),Promise.all(r).then(function(){t.submit(e).then(function(){console.log("Enviando"),t.handleForm.submit()}).catch(function(){return!1})}).catch(function(){t._showErrors()})}},{key:"_addEventSubmit",value:function(){var e=this;this.handleForm.addEventListener("submit",function(t){return e._handleSubmit(t)})}},{key:"_addEventChange",value:function(){var e=this,t=Object.keys(this.fields),n=["change","keyup","paste","blur"];t.forEach(function(t){var r=e.fields[t].fieldElements;n.forEach(function(t){r.forEach(function(n){n.addEventListener(t,function(t){return e._handleChange(t)})})})})}},{key:"_getFields",value:function(e,t){var r={},o={};for(var i in e)o={},t&&i in t&&"object"==n(t[i])&&(o=t[i]),r[i]={rules:e[i],fieldElements:Array.from(this.handleForm.querySelectorAll("[name='".concat(i,"']"))),customMessages:o||o,error:null};return r}},{key:"_showErrors",value:function(){var e=this.fields;for(var t in e){var n=e[t],r=n.fieldElements[n.fieldElements.length-1],o=r.getAttribute("name");if(!r.parentNode.querySelectorAll('div[data-form-validator="'.concat(o,'"]')).length){var i=document.createElement("div");i.setAttribute("data-form-validator",o),r.after(i)}var a=r.parentNode.querySelector('div[data-form-validator="'.concat(o,'"]'));n.error?a.innerHTML=n.error:a.innerHTML=""}}},{key:"_hideErrors",value:function(){var e=this.fields;for(var t in e){var n=e[t],r=n.fieldElements[n.fieldElements.length-1].parentNode.getElementsByClassName("validate-error")[0];n.error||(r.innerHTML="")}}},{key:"validate",value:function(e){var t=this,n=e[e.length-1],r=Object.keys(this.fields[n.getAttribute("name")].rules),o=n.getAttribute("name"),i=[],a=!1;return r.forEach(function(e){var r=t.fields[o].rules[e],u=t.rules[e];"remote"!==e||a?i.push(new Promise(function(o,i){return a?i():u(n,r)?(t.fields[n.getAttribute("name")].error=null,o()):(t.fields[n.getAttribute("name")].error=e in t.fields[n.getAttribute("name")].customMessages?t.fields[n.getAttribute("name")].customMessages[e](r):t.errorMessages[e](r),a=!0,i())})):i.push(u(n,r).then(function(){return t.fields[n.getAttribute("name")].error=null,Promise.resolve()}).catch(function(){return t.fields[n.getAttribute("name")].error=e in t.fields[n.getAttribute("name")].customMessages?t.fields[n.getAttribute("name")].customMessages[e](r):t.errorMessages[e](r),a=!0,Promise.reject()}))}),i.reduce(function(e,t){return e.then(function(){return t.then()})},Promise.resolve())}}])&&i(t.prototype,o),a&&i(t,a),e}();e.exports=a}])});